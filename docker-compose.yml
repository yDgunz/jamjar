services:
  app:
    build: .
    ports:
      - "80:8000"
    volumes:
      - jam-data:/data
    environment:
      - JAM_DATA_DIR=/data
      - JAM_STATIC_DIR=/app/static
      - JAM_JWT_SECRET=${JAM_JWT_SECRET}
      - JAM_API_KEY=${JAM_API_KEY}
      - JAM_R2_ACCOUNT_ID=${JAM_R2_ACCOUNT_ID:-}
      - JAM_R2_ACCESS_KEY_ID=${JAM_R2_ACCESS_KEY_ID:-}
      - JAM_R2_SECRET_ACCESS_KEY=${JAM_R2_SECRET_ACCESS_KEY:-}
      - JAM_R2_BUCKET=${JAM_R2_BUCKET:-}
    restart: unless-stopped

volumes:
  jam-data:
